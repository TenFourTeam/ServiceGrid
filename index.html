<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ServiceGrid - Professional Service Management</title>
    <meta name="description" content="Professional service management software. Streamline scheduling, invoicing, and customer management." />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <meta name="author" content="ServiceGrid" />
    
    <!-- Favicon -->
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">

    <meta property="og:title" content="ServiceGrid - Professional Service Management" />
    <meta property="og:description" content="Professional service management software. Streamline scheduling, invoicing, and customer management." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/favicon.svg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="/favicon.svg" />
    <link rel="preload" as="image" href="/images/a86a00c8-341b-4bbd-b9b5-8b15c1bd5227-removebg-preview%20(1).png" fetchpriority="high" imagesizes="(max-width: 768px) 96px, 128px" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@500;600&display=swap" rel="stylesheet">

    <script>
      (function () {
        try {
          var raw = localStorage.getItem('ServiceGrid-lawn-store-v1');
          if (!raw) return;

          var parsed = JSON.parse(raw);
          var data = parsed && typeof parsed === 'object' && 'version' in parsed && 'data' in parsed ? parsed.data : parsed;
          var business = data?.business;

          if (business?.logoUrl) {
            // Preconnect to the image domain for faster loading
            var link = document.createElement('link');
            link.rel = 'preconnect';
            link.href = new URL(business.logoUrl).origin;
            document.head.appendChild(link);

            // Preload the image
            var preloadLink = document.createElement('link');
            preloadLink.rel = 'preload';
            preloadLink.as = 'image';
            preloadLink.href = business.logoUrl;
            preloadLink.fetchpriority = 'high';
            document.head.appendChild(preloadLink);
          }

          // Update meta tags with business data
          if (business?.name) {
            var title = business.description 
              ? business.name + ' - ' + business.description
              : business.name + ' - Professional Service Management';
            document.title = title;

            // Update meta description
            var description = business.description || 'Professional service management software. Streamline scheduling, invoicing, and customer management.';
            var metaDesc = document.querySelector('meta[name="description"]');
            if (metaDesc) metaDesc.setAttribute('content', description);

            // Update OpenGraph tags
            var ogTitle = document.querySelector('meta[property="og:title"]');
            if (ogTitle) ogTitle.setAttribute('content', title);
            var ogDesc = document.querySelector('meta[property="og:description"]');
            if (ogDesc) ogDesc.setAttribute('content', description);

            // Update Twitter tags
            var twitterTitle = document.querySelector('meta[name="twitter:title"]');
            if (twitterTitle) twitterTitle.setAttribute('content', title);
            var twitterDesc = document.querySelector('meta[name="twitter:description"]');
            if (twitterDesc) twitterDesc.setAttribute('content', description);
          }
        } catch (e) {
          console.warn('Failed to update meta tags from localStorage:', e);
        }
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>